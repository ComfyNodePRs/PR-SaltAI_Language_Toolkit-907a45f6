import { app } from "../../../scripts/app.js";


const ext = {
	// Unique name for the extension
	name: "SaltAI.Icon",
	async init(app) {
		
		const origDrawNodeShape = LGraphCanvas.prototype.drawNodeShape;

		LGraphCanvas.prototype.drawNodeShape = function (
			node, ctx, size, fgcolor, bgcolor, selected, mouse_over
		) {
			const result = origDrawNodeShape?.apply(this, arguments);
			
            if (!node || !ctx || !node.title || !node.title.startsWith('âˆž')) {
                return result;
            }
			
			const icon = document.createElement('img');
			icon.src = 'data:image/png;base64,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bYzpRlH0+Tvv/Oeh6enpqd27d39NiD52d911F375y6MwxiCOk8GK4JYuN6a1FsePf4a7776b4jgevGzHjh145plnsXnzZqxbtxYfffQR+vdLvmpg+9Za5HmOubkzePjhh0oT//GPH3//+eef35skySd5nreISBORKXjxNX0gRD8UrtoHqCmlxpltnUisEkJsAHDxli1X3rxnz57rK8BbEb3yyiv88MN/yQBw7bXX0IsvvrDytbCghx566H9efPHv9ggh3xdCfJjn2XEiMW+MmWu1Wm0sJFr8UvocDjdFKElikedaSikUMwspZQTAfvrpMW2MWXf99dcPRYbLpUOHDvG9995vCufGH374vzh58gRt3759xSDs2bPn9KOPPjYjhHyf2R7X2pwkopbWuiul6GZZlmM4gcpVAJRKluUijmOhtRZSCgVACSFICMEHDx4802jU123dunVypRN+5513+I47vtG1ltlaa5lZMzMfPnyY6/WUtm7dumwQDhw4MPetb337VSnl+0KIj5nxObOd11q3hRDdVqvlfwSFu8UId4SAIJOb57mIokhKKaW1VjKzoD7l+/fvP6m1WXPDDTc0lzvhI0eO2FtvvXWeGdpay9b2d2+stYYZ5sCB/brX64lt27YtuUewZ8+e09/85p2vKqU+IKJPrLUnmPk0EXWZudPpdLroqz5XFPgAVO2cDswiiiKhtSEphSzWXSp2absHDx48c/75G8+7/PLLx5YDwJ13fvvUZ58dbwGcWWtM/5vd9ort74wZ+dtv/2tvcnJSXXXVVSO3yA4dOtS6/fZv7FFKHQX4U2Y+wYyTAGdam5aUsp3neYby6ZKhvUFK00Z42iNMg0UAVJqmdWtto9geGxeCJgBMMvOGZrN5yQsvPP9HmzZtmmi322yMKX1fxHFMzMw//OFDJ1577fVZ9JMeZK2V6K84pljT+8GJEDDGxD/72XPnb9u2rXbixIn+TWaOohhZ1svvueeemaNH3/t3IeTHxphZIpoVglp5rjtCiPlOpzOPsuPzd4UGxQfAd4LuQ8LPBNeSJGkwcxJFUSPP84aUchzAlJRilTH2PACrixRZjZkTIoqJ/JQYMREZ/0uzAMvfuLRCCAuAjTHCWstCCAOgA6DDzB0izAL0iRDiMyI6aYw5HUVRp7D7+U6n00Y/qeqyzb7nL/kBhYpsCcqnMFw97/V6naKPKJIfLKVkY2wXwLwQ4hiAVAjRYObUWpswo4ZBmpxVIXUBAMYYXgAHeTFhZmaXFtNSSpcVbjFzq8gPzhljThljWkTUAtDRWrd7vd5cAVSGaoZ9YgfAQFV9ZHyJFPdc1hZZliGOYzCzNcZwP/aGllJmAGp9KVGKIjnKzJG11p0T8BOkzOVg3qXG3aGIHP2cYK9grE1EbQBzAFqunYg6vV6vVfRxGaEQgHAFGESC/jfAEEIoa4ML4mWWZZ04jrnYbeECDFNMKmPmLor0OUYckig0IIzTc/QzxD4AnSI32C6yxB30M8fdLMvmiz5dVDu8IbX3mVRe49CXEsqa4FMPgM2yzD2XRVGUA8gLxnsA2uhL3x2UcMdnXE4Qoh8z+xN1zsqgOAzhAC1A6OZ5PtAGLBygcCdH3LOh06visQSA6+BPyNWr/IFGeck0XhoqB5ArpZKCiQhApLV2GuDvPvvvHhyP8Zhxx2KcJnS9umuv8vThx08o3MHvKgBc3TErvd9uYOe0HPmqpwDkWmuX03dnhXwAwk1Kf3wfhBx9CTtGHdMaC1LXGGbeV/2Q6UoTGAWCkzxj+NNZeP18CUhvsu5kiDtSVwWAv/L4ZwN9EPyrq7vfPnBVy10IRImqAPDJP3vnm4S/fAHlFyoMS9RPtfvxhv9ef/KhJuigzS2Z/kHKKo9f6fkXA2Ax8r+kwmOubmcpZNq3+fDIbNX4IQhhyYN7vtb4IPhzRUV9QKM2RIAFifvxQVWWNQTAZ1hj+Pxw1U6zLy3HhM+gz3AV06H0UVGvpFEa4DPmn+ICyjurVNHfPWMwzLwPQEh+4LXSspjqV28cLgGAPynf2YX3wnXc/5ao2mSpzM8Fk61ixF/TQ1UPn0XFdSQtxweEZuC3+c5RBH0dw6EjBcrMhyF4KL2lortRTq7S6YW0XADCiYaAuMn695ypjNprGPWeqvU79BGj7iG4tyQtdxUInV1VvACUNcL9DpOSIfNV0eco6VY5tpDZRW0+pJX+bS7UAP93CMggTMbSzFe9I3Rio+x70XV+KTpbABxVLWVhhOf6+dpR5QCr3uNfQ9DPSuVDOtt/jvqTCJ1fqAHAMNOOqsCqeg8wWhMWe35JOhd/nvaXwzAuABbA8G1zuZoQtp8Tpn36P+v6p8z2+9UaAAAAAElFTkSuQmCC'
			ctx.drawImage(icon,27,-23,16,16);
			
			return result;
		};
	}
};

app.registerExtension(ext);